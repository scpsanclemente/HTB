## Recon
No podemos usar sudo -l ;

### hosts
Miramos el **/etc/hosts** para encontrar posibles subdominios:
```bash
michael@sightless:~$ cat /etc/hosts
127.0.0.1 localhost
127.0.1.1 sightless
127.0.0.1 sightless.htb sqlpad.sightless.htb admin.sightless.htb
```

### netstat
Usamos el netstat -nlpt para saber que conexiones tenemos habilitadas 
```bash
michael@sightless:~$ netstat -nlpt
(Not all processes could be identified, non-owned process info
 will not be shown, you would have to be root to see it all.)
Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    
tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN      -                   
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      -                   
tcp        0      0 127.0.0.1:3000          0.0.0.0:*               LISTEN      -                   
tcp        0      0 127.0.0.1:33060         0.0.0.0:*               LISTEN      -                   
tcp        0      0 127.0.0.1:8080          0.0.0.0:*               LISTEN      -                   
tcp        0      0 127.0.0.1:50451         0.0.0.0:*               LISTEN      -                   
tcp        0      0 127.0.0.1:42253         0.0.0.0:*               LISTEN      24744/ssh           
tcp        0      0 127.0.0.53:53           0.0.0.0:*               LISTEN      -                   
tcp        0      0 127.0.0.1:34299         0.0.0.0:*               LISTEN      -                   
tcp        0      0 127.0.0.1:33813         0.0.0.0:*               LISTEN      -                   
tcp        0      0 127.0.0.1:3306          0.0.0.0:*               LISTEN      -                   
tcp6       0      0 :::22                   :::*                    LISTEN      -                   
tcp6       0      0 :::21                   :::*                    LISTEN      -               
```
Encontramos el puerto 8080 en local que parece sospechoso, hacemos pivoting con chisel a nuestra maquina host

En la maquina ==atacante (host)== :
```bash
~$ ./chisel server --reverse -p 4443
2024/11/19 18:24:37 server: Reverse tunnelling enabled
2024/11/19 18:24:37 server: Fingerprint mgcPNujuLSpfpQBzbLkIZboBivlQthrSFr3kTDAsp6A=
2024/11/19 18:24:37 server: Listening on http://0.0.0.0:4443
```

En la maquina ==victima== :

```bash
$ ./chisel client 10.10.11.32:4443 R:8080:127.0.0.1:8080   
2024/11/19 19:43:26 client: Connecting to ws://10.10.11.32:4443
```

![[Pasted image 20241119200213.png]]
O también podemos crear un túnel ssh:
```bash
➜  exploitation ssh michael@sightless.htb -L 8080:127.0.0.1:8080
michael@sightless.htb's password: 
Warning: remote port forwarding failed for listen port 8080
Last login: Tue Nov 19 18:37:04 2024 from 10.10.16.63
```

Una vez realizado el puente encontramos el admin panel de Froxlor en la 127.0.0.1:8080:

![[Pasted image 20241119200602.png]]

Podemos entrar con la cuenta de michael.
### Chrome Remote Debugger
For getting access to Froxlor dashboard, we can use chrome remote debugger exploit 
There is an execution policy issue in PHP-FPM configuration for the user Michael in Foxlor.
[Info](https://exploit-notes.hdks.org/exploit/linux/privilege-escalation/chrome-remote-debugger-pentesting/)


```bash
sightless ssh -L 42253:127.0.0.1:42253 michael@sightless 
```


![[Pasted image 20241119202313.png]]
### Local enumeration

-  netstat -tlnp
-  /etc/hosts

### Atack vector

- 

---



